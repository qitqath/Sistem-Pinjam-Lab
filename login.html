<!--
    Aqilah Qathrunnada Mumtaz
    2210511155
-->

<html>
    <head>
        <title>Registration</title>
        <link rel="icon" href="https://www.upnvj.ac.id/id/files/thumb/89f8a80e388ced3704b091e21f510755/520" type="image/x-icon">
        <style type="text/css">
            body{
                font-family: Arial, Helvetica, sans-serif;
                background-color: rgb(98, 98, 98);
            }
            .main{
                width: 400px;
                margin: 16px auto;
                font-size: 16px;
                background-color: #f9f9f9;
            }
            .header{
                margin-top: 0px;
                margin-bottom: 0px;
                text-align: center;
                background-color: cornflowerblue;
                padding: 20px;
            }
            .bio{
                box-sizing: border-box;
                width: 100%;
                height: 40px;
                margin: 10px;
                font-size: 0.95em;
            }
            .form{
                padding: 16px;
                padding-right: 36px;
            }
            .under{
                padding-left: 5px;
            }
            .btn{
                background-color: cornflowerblue;
                color: white;
                width: 100%;
                height: 40px;
                margin: 10px;
                border: 0px;
            }
    
            .btn:hover{
                background-color: rgb(173, 189, 230);
            }
    
            select{
                width: 100%;
                height: 40px;
                margin: 10px;
            }
        </style>
    </head>

    <body>
        <div class="main">
            <h2 class="header">FORM PENGISIAN PEMINATAN KEAHLIAN FAKULTAS ILMU KOMPUTER UPN VETERAN JAKARTA<br>
                <img src="https://www.upnvj.ac.id/id/files/thumb/89f8a80e388ced3704b091e21f510755/520" width="50px" height="50px">
            </h2>

            <form>
                <div class="form">
                    <input type="text" id="nim" class="bio" placeholder="NIM Mahasiswa" required><br>
                    <input type="text" id="nama" class="bio" placeholder="Nama Mahasiswa" required><br>
                    <input type="text" id="smt" class="bio" placeholder="Semester Mahasiswa" required><br>

                    <div class="under">
                        <select id="lantai" name="lantai" required onclick="pilihan()">
                            <option disabled selected>Pilih Lantai</option>
                            <option value="lt2">Lantai 2</option>
                            <option value="lt3">Lantai 3</option>
                            <option value="lt4">Lantai 4</option>
                        </select>
                        <fieldset id="TAG2" style="display: none;">
                            <legend>Lab Fakultas Ilmu Komputer Lantai 2</legend>
                            <table>
                                <tr>
                                    <td><label for="fl201">FIK-LAB 201</label></td>
                                    <td><input type="checkbox" name="fl201" id="r2"></td>
                                </tr>
                                <tr>
                                    <td><label for="fl202">FIK-LAB 202</label></td>
                                    <td><input type="checkbox" name="fl202 id="r2"></td>
                                </tr>
                                <tr>
                                    <td><label for="fl203">FIK-LAB 203</label></td>
                                    <td><input type="checkbox" name="fl203" id="r2"></td>
                                </tr>
                            </table>
                        </fieldset>

                        <fieldset id="TAG3" style="display: none;">
                            <legend>Lab Fakultas Ilmu Komputer Lantai 3</legend>
                            <table>
                                <tr>
                                    <td><label for="fl301">FIK-LAB 301</label></td>
                                    <td><input type="checkbox" name="fl301" id="r3"></td>
                                </tr>
                                <tr>
                                    <td><label for="fl302">FIK-LAB 302</label></td>
                                    <td><input type="checkbox" name="fl302" id="r3"></td>
                                </tr>
                                <tr>
                                    <td><label for="fl303">FIK-LAB 303</label></td>
                                    <td><input type="checkbox" name="fl303" id="r3"></td>
                                </tr>
                            </table>
                        </fieldset>

                        <fieldset id="TAG4" style="display: none;">
                            <legend>Lab Fakultas Ilmu Komputer Lantai 4</legend>
                            <table>
                                <tr>
                                    <td><label for="fl401">FIK-LAB 401</label></td>
                                    <td><input type="checkbox" name="fl401" id="r4"></td>
                                </tr>
                                <tr>
                                    <td><label for="fl402">FIK-LAB 402</label></td>
                                    <td><input type="checkbox" name="fl402" id="r4"></td>
                                </tr>
                                <tr>
                                    <td><label for="fl403">FIK-LAB 403</label></td>
                                    <td><input type="checkbox" name="fl403" id="r4"></td>
                                </tr>
                                <tr>
                                    <td><label for="fl403">FIK-LAB 404</label></td>
                                    <td><input type="checkbox" name="fl403" id="r4"></td>
                                </tr>
                            </table>
                        </fieldset>
                        
                        <br>
                        <input class="btn" type="button" value="Submit" onclick="hasil();"> <br>
                        <input class="btn" type="button" value="Kembali ke Home" href="login.html">
                    </div>
                </div>
            </form>
        </div>

        <script type="text/javascript">
            // menampilkan dropdown pilihan lantai
            function pilihan() {
                var choose = document.getElementById("lantai").value;
                var getL2 = document.getElementById("TAG2");
                var getL3 = document.getElementById("TAG3");
                var getL4 = document.getElementById("TAG4");

                // Setiap kali program studi dipilih, atur semua fieldset menjadi display: none
                getL2.style.display = 'none';
                getL3.style.display = 'none';
                getL4.style.display = 'none';

                if (choose === 'lt2') {
                    getIF.style.display = 'block';
                }
                else if (choose === 'lt3') {
                    getS1.style.display = 'block';
                }
                else if (choose === 'lt4') {
                    getD3.style.display = 'block';
                }
            }


            function hasil(){
                var getNIM = document.getElementById("nim");
                var getNAME = document.getElementById("nama");
                var getSMT = document.getElementById("smt");
                var getLT = document.getElementById("lantai");

                var room = [];
			    var chosen = document.querySelectorAll('input[type=checkbox]:checked');

                for (var i = 0; i < chosen.length; i++) {
			        room.push(chosen[i].value);
			    }   

                var validasiAngka = /^[0-9]+$/;
                var validasiHuruf = /^[a-zA-Z ]+$/;
                
                if(nim.value != "" && nama.value != "" && smt.value != "" && lantai.value != "" && room != ""){
                    if(nim.value.match(validasiAngka)){
                        if(nama.value.match(validasiHuruf)){
                            if(smt.value.match(validasiAngka)){
                                alert("Pengisian Telah Berhasil!");
                                
                                
                                let url= "result.html?nim="+nim.value+"&nama="+nama.value+"&semester="+smt.value+"&lantai="+lantai.value+"&room="+room;
                                window.open(url, "_blank", "width=400,height=400");
                            }else{
                                alert("Isian Semester Anda Salah!\nFormat wajib angka!");
                                smt.value="";
                                smt.focus();
                                return false;
                            }
                            
                        }else{
                            alert("Isian Nama Anda Salah!\nFormat wajib huruf!");
                            nama.value="";
                            nama.focus();
                            return false;
                        }
                    }else{
                        alert("Isian NIM Anda Salah!\nFormat wajib angka!");
                        nim.value="";
                        nim.focus();
                        return false;
                    }
                    
                }else{
                    alert("Isian Kosong! Silahkan isi data terlebih dahulu!");
                    nim.value="";
                    nama.value="";
                    angkatan.value="";
                    prodi.value="";
                    mk.value="";
                    nim.focus();
                    return false;
                }
            }
        </script>
    </body>
</html>